# libdatachannel-example

This project demonstrates a minimal integration between an application layer and a stub implementation of the [`libdatachannel`](https://github.com/paullouisageneau/libdatachannel) API. It is intended as a scaffold that can be extended with the real library on platforms such as Windows and Linux.

## Project Structure

- **CMakeLists.txt** – Configures the build, third-party stub library, application targets, and unit tests.
- **include/** – Public headers that expose the sample API.
- **src/** – Source files for the native and WebAssembly entry points plus the reusable `RTCConnection` wrapper.
- **third_party/libdatachannel/** – A lightweight stand-in for the real `libdatachannel` project so the scaffold builds in offline environments.
- **tests/** – Basic unit tests that exercise the wrapper.
- **tools/** – Helper scripts for native and WebAssembly builds.

## Building (Linux/macOS)

```bash
cmake -S . -B build
cmake --build build
ctest --test-dir build
```

The native executable is placed in `build/native_app`. Tests are executed with `ctest`.

## Building (Windows)

On Windows, the same commands can be executed from a Visual Studio Developer Prompt or a PowerShell session configured for CMake. Alternatively, open the `build` directory generated by the configuration step in Visual Studio.

## Building the WebAssembly Demo

To produce the WebAssembly executable, enable the `ENABLE_WASM` option with an Emscripten toolchain configured in your environment:

```bash
cmake -S . -B build-wasm -DENABLE_WASM=ON -DCMAKE_TOOLCHAIN_FILE=/path/to/emscripten/toolchain.cmake
cmake --build build-wasm
```

## Replacing the Stub Library

The scaffold uses a small in-tree stub of `libdatachannel` so that it can be built without network access. To integrate the real dependency:

1. Remove the `third_party/libdatachannel` directory.
2. Add the official project as a submodule or external dependency.
3. Update the `add_subdirectory` call in `CMakeLists.txt` to point at the real source.

## License

This project is distributed under the MIT License.

